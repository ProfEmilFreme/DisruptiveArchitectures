---
layout: "class"
course: "disruptive"
section:
    name: "Sistemas Embarcados"
    order: 2
class:
    title: "ESP32"
    order: 3
---


Nas imagens acima temos a foto do ESP32 Dev Kit e um esquema básico de seus
pinos, similar aos que podemos encontrar em simuladores como o TinkerCad. O
ESP32 é uma plataforma de desenvolvimento poderosa, que possui um
microcontrolador da Espressif com Wi-Fi e Bluetooth integrados, e que pode ser
programada usando o Arduino IDE, facilitando muito a transição para quem já
conhece o Arduino tradicional.  

Ao longo dos projetos a seguir, vamos explorar as possibilidades do ESP32, como
programá-lo e conectá-lo a outros dispositivos, aproveitando seus recursos
avançados.

***

# #01 Pisca LED (Blink) com ESP32

O clássico "Hello World" do ESP32 também é piscar um LED!

Antes de começar, você precisará baixar a Arduino IDE, se ainda não tiver, em
[arduino.cc/software](https://www.arduino.cc/en/software/).  

Depois de instalar, precisamos configurar a IDE para reconhecer o ESP32 seguindo
estes passos básicos:

- Acesse **Arquivo → Preferências**  
- Na caixa "URLs adicionais para Gerenciadores de Placas", cole o link:
  `https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json`  
- Confirme e após isso vá em **Ferramentas → Placa → Gerenciador de Placas**  
- Procure por "ESP32" e instale o pacote da Espressif Systems  
- Selecione a placa correta, normalmente "ESP32 Dev Module" para a maioria dos
  kits  
- Escolha a porta USB correta onde o ESP32 está conectado  

Pronto, agora podemos começar a programar!

***

O código base para piscar o LED embutido (LED_BUILTIN) do ESP32 é parecido com o
Arduino:  

```cpp void setup() { pinMode(LED_BUILTIN, OUTPUT);  // Configura o pino do LED
como saída }

void loop() { digitalWrite(LED_BUILTIN, HIGH); // Liga o LED delay(500);
// Espera 500 milissegundos digitalWrite(LED_BUILTIN, LOW);  // Desliga o LED
delay(500);                      // Espera mais 500 milissegundos } ```

Só que atenção: dependendo do modelo do seu ESP32, o LED pode estar ligado a um
pino diferente, normalmente o 2. Então, se o LED_BUILTIN não funcionar,
substitua por `2` ou consulte o esquema da sua placa.

***

# #02 Buzzer Sonoro com ESP32

Vamos fazer o ESP32 emitir sons usando um buzzer. Você vai precisar do buzzer e
fios para conectar.

Conecte o pino positivo do buzzer a um pino PWM, por exemplo o pino 27, e o
negativo ao GND.

O código para gerar tons é semelhante ao Arduino, usando a função `ledcWrite` do
ESP32 para o PWM:  

```cpp const int buzzerPin = 27; const int freq = 440; // Frequência em Hz const
int pwmChannel = 0; const int resolution = 8; // bits

void setup() { ledcSetup(pwmChannel, freq, resolution); // Configura PWM
ledcAttachPin(buzzerPin, pwmChannel);   // Associa PWM ao pino }

void loop() { ledcWrite(pwmChannel, 128); // Meio ciclo ligado para gerar tom
delay(500); ledcWrite(pwmChannel, 0);   // Desliga o buzzer delay(500); } ```

O ESP32 tem 16 canais PWM, então escolha o canal que desejar e ajuste frequência
e resolução para seu projeto.

***

# #03 Leitura de Potenciômetro e Controle de LED com PWM

O ESP32 também tem entradas analógicas (ADC) muito precisas. Vamos ler um
potenciômetro conectado no pino 36 (ADC1_CHANNEL_0) e controlar o brilho de um
LED no pino 25.

Faça a ligação:  

- Potenciômetro: pino do meio ao 36, os outros dois a 3.3V e GND  
- LED: ânodo ao pino 25 via um resistor, catodo ao GND  

Código:  

```cpp const int potPin = 36; const int ledPin = 25; const int pwmChannel = 1;
const int resolution = 8;

void setup() { Serial.begin(115200); ledcSetup(pwmChannel, 5000, resolution); //
5kHz PWM no canal 1 ledcAttachPin(ledPin, pwmChannel); }

void loop() { int potValue = analogRead(potPin);        // Leitura analógica
(0-4095) int pwmValue = map(potValue, 0, 4095, 0, 255); // Mapeia para PWM 0-255
ledcWrite(pwmChannel, pwmValue);          // Ajusta brilho do LED
Serial.print("Potenciômetro: "); Serial.println(potValue); delay(200); } ```

***

Com esses passos e exemplos você já pode explorar o grande potencial do ESP32,
unindo conectividade, sensoriamento e controle em um só dispositivo, com a
simplicidade do Arduino IDE.

Nos próximos projetos, veremos como integrar sensores IoT, usar Wi-Fi e
Bluetooth, e criar soluções cada vez mais inteligentes!

